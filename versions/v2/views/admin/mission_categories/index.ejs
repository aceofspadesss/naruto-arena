<!DOCTYPE html>
<html>

<head>
    <title>Manage Mission Categories - Naruto Arena Admin</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <style>
        .admin-container {
            width: 960px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border: 1px solid #000;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
            vertical-align: middle;
        }

        th {
            background: #eee;
        }

        .actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .btn {
            padding: 5px 10px;
            background: #eee;
            border: 1px solid #999;
            text-decoration: none;
            color: black;
            cursor: pointer;
            display: inline-block;
            font-size: 13px;
        }

        .btn-danger {
            background: #ffdddd;
        }

        .admin-nav {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .thumbnail-preview {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border: 1px solid #ccc;
        }

        .order-badge {
            display: inline-block;
            background: #ddd;
            border: 1px solid #bbb;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="admin-container">
        <h1>Manage Mission Categories</h1>
        <div class="admin-nav">
            <a href="/admin/characters" class="btn">Characters Admin</a>
            <a href="/admin/news" class="btn">News Admin</a>
            <a href="/ninja-missions" class="btn">View Page</a>
            <a href="/" class="btn">Back to Site</a>
        </div>
        <div style="margin-bottom: 20px;">
            <a href="/admin/mission-categories/create" class="btn">+ Add Category</a>
        </div>

        <table>
            <thead>
                <tr>
                    <th style="width: 40px;">Order</th>
                    <th style="width: 70px;">Thumbnail</th>
                    <th style="width: 60px;">Image ID</th>
                    <th style="width: 220px;">Title</th>
                    <th style="width: 180px;">Slug</th>
                    <th>Description</th>
                    <th style="width: 110px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (categories.length === 0) { %>
                    <tr>
                        <td colspan="7">No mission categories found.</td>
                    </tr>
                <% } else { %>
                    <% categories.forEach(cat => { %>
                        <tr>
                            <td><span class="order-badge"><%= cat.order %></span></td>
                            <td>
                                <img
                                    class="thumbnail-preview"
                                    src="/images/content/<%= cat.thumbnailId %>/thumbnail.jpg"
                                    alt="<%= cat.title %>"
                                    onerror="this.style.display='none'"
                                >
                            </td>
                            <td><%= cat.thumbnailId %></td>
                            <td><%= cat.title %></td>
                            <td><code><%= cat.slug %></code></td>
                            <td style="font-size: 12px; max-width: 300px; overflow: hidden;">
                                <%- cat.description.replace(/<[^>]*>/g, '').substring(0, 120) %>...
                            </td>
                            <td>
                                <div class="actions">
                                    <a href="/admin/mission-categories/edit/<%= cat.id %>" class="btn">Edit</a>
                                    <form action="/admin/mission-categories/delete/<%= cat.id %>" method="POST"
                                        onsubmit="return confirm('Delete this category?');">
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    <% }); %>
                <% } %>
            </tbody>
        </table>
    </div>
</body>

</html>
